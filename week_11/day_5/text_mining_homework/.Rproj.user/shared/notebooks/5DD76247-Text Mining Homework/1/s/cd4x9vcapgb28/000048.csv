"0","crime_and_punishment <- gutenberg_download(2554) %>%"
"0","  mutate(text = iconv(text, to = 'latin1')) %>% "
"0","  select(-gutenberg_id) %>% "
"0","  drop_na(text) %>% "
"0","  mutate(sentence = 1:14770) %>% "
"0","  unnest_tokens(word, text) %>% "
"0","  anti_join(custom_stop_words)  "
"2","Joining, by = ""word""
"
"0","cp_sentiments <- crime_and_punishment  %>%"
"0","  inner_join(get_sentiments(""afinn""))"
"2","Joining, by = ""word""
"
"0","cp_sentence_sentiments <- cp_sentiments %>%"
"0","  group_by(sentence) %>%"
"0","  summarise(sum_sentiment = sum(value)) %>% "
"0","  mutate(running_total = cumsum(sum_sentiment)) %>% "
"0","  mutate(book = ""crime and punishment"") %>%"
"0","  mutate(story_position = sentence/max(sentence)) # all books on scale from 0 to 1"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"0","all_sentence_sentiments <- rbind(sentence_sentiments, cp_sentence_sentiments)"
"0",""
"0","ggplot(all_sentence_sentiments) +"
"0","  aes(x = story_position, y = running_total, color = book) +"
"0","    geom_smooth()"
"0",""
